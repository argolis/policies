#!/bin/sh

#
# create database 'proftpd'
#

PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"


# set initial password (if password is empty)
#mysqladmin -u'root' password 'hpx1273' 2>/dev/null
mysql -u'root' -e "SET password for 'root'@'localhost' = PASSWORD('hpx1273');" || /bin/true

# create database 
mysql -u'root' -p'hpx1273' <<SQL_COMMANDS
  
  CREATE DATABASE IF NOT EXISTS proftpd;
  USE proftpd;

  CREATE TABLE IF NOT EXISTS users (
    userid VARCHAR(30) NOT NULL UNIQUE,
    passwd VARCHAR(80) NOT NULL,
    uid INTEGER UNIQUE,
    gid INTEGER,
    homedir VARCHAR(255),
    shell VARCHAR(255)
  );
  
  CREATE TABLE IF NOT EXISTS groups (
    groupname VARCHAR(30) NOT NULL,
    gid INTEGER NOT NULL,
    members VARCHAR(255)
  );

SQL_COMMANDS



# CREATE INDEX groups_gid_idx ON groups (gid);
# CREATE INDEX users_userid_idx ON users (userid);
